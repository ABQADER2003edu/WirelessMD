يعتمد هذا السرد على المعلومات المتوفرة في المصادر الخاصة بـ **أساسيات نظام GSM** (GSM Fundamentals) [1].

---

## أساسيات نظام GSM (GSM Fundamentals)

### 1. التاريخ (History)
*   نُشرت مواصفات المرحلة الأولى (**Phase I**) لنظام GSM في عام 1990 [1].
*   تغير اسم النظام من **Group Special Mobile** إلى **Global System for Mobile Communications** (الذي لا يزال يشار إليه اختصاراً بـ **GSM**) بسبب الطلب الدولي الهائل [1].
*   بدأت الخدمة التجارية في منتصف عام 1991 [1].
*   بحلول عام 1993، كان هناك 36 شبكة GSM في 22 دولة [1].
*   نما عدد المشتركين عالمياً من 1.3 مليون في أوائل عام 1994 إلى أكثر من 55 مليون مشترك بحلول عام 1997 [1].

### 2. هندسة النظام (GSM Architecture)
يتكون نظام GSM من ثلاثة أنظمة فرعية رئيسية [2]:

#### أ. محطة الهاتف المتنقل (Mobile Station - MS)
تتكون محطة الهاتف المتنقل (**MS**) من كيانين رئيسيين [3]:

1.  **جهاز الهاتف المتنقل (Mobile Equipment - ME):**
    *   يتم إنتاجه بواسطة العديد من الشركات المصنعة المختلفة [3].
    *   يجب أن يحصل على موافقة هيئة التقييس [3].
    *   يتم تعريفه بشكل فريد بواسطة رقم **IMEI** (**International Mobile Equipment Identity**) [3].
    *   **رقم IMEI:** هو رقم مكون من 15 رقمًا [3]. يتحقق من أن محطة الهاتف المتنقل معتمدة من النوع وغير مسروقة [3]. يتكون الـ **IMEI** من أجزاء مثل **TAC** (Type Approval Code)، و **FAC** (Final Assemble Code)، و **SNR** (Serial Number) [3].

2.  **وحدة هوية المشترك (Subscriber Identity Module - SIM):**
    *   عبارة عن بطاقة ذكية تحتوي على هوية المشترك المتنقل الدولية (**IMSI** - International Mobile Subscriber Identity) [4].
    *   الـ **IMSI** هو الرقم غير القابل للاتصال المستخدم لتعريف المشترك في شبكة GSM ويتم تخزينه على بطاقة **SIM** [5].
    *   يتكون الـ **IMSI** من **MCC** (Mobile Country Code)، و **MNC** (Mobile Network Code)، و **MSIN** (Mobile Subscriber Identity Number) [5].
    *   تسمح شريحة **SIM** للمستخدم بإرسال واستقبال المكالمات والخدمات الأخرى المشتركة [4].
    *   يمكن نقلها من هاتف إلى آخر وتحتوي على معلومات أساسية لتفعيل الهاتف [4].
    *   يتم حماية المستخدم من خلال رقم التعريف الشخصي (**PIN** - Personal Identity Number) [4]. إذا تم إدخال الـ **PIN** بشكل غير صحيح عدة مرات، يتم قفل الهاتف باستثناء مكالمات الطوارئ، حتى يتم إدخال مفتاح إلغاء قفل الـ **PIN** (**PUK** - PIN unblocking key) [6].
    *   تحتوي الـ **SIM** على معلومات المشترك (بعضها ثابت من قِبل المشغل والبعض الآخر قابل للتغيير من قِبل المستخدم) [6].
    *   يمكن تحديث المعلومات عبر لوحة المفاتيح أو عن طريق الجو (**OTA** - over the air) باستخدام رسالة **SMS** عبر **SIM Toolkit** [6].
    *   تتكون شريحة **SIM** داخليًا من وحدة المعالجة المركزية (**CPU** - Central Processing Unit)، وذاكرة القراءة فقط (**ROM** - Read Only Memory) وهي غير متطايرة (**Non Volatile**)، وذاكرة الوصول العشوائي (**RAM** - Random Access Memory) وهي متطايرة (**Volatile**)، وذاكرة القراءة فقط القابلة للمسح والبرمجة كهربائياً (**EEPROM** - Electrically Erasable Programmable RO Memory) وهي غير متطايرة [5, 6].

**أوضاع عمل الـ MS (Modes of MS)** [4]:
*   **مرتبطة (Attached):** وتشمل حالتي:
    *   **خاملة (Idle):** (التسجيل - **registration**، تحديث منطقة الموقع - **LA Updating**، الترحيل - **paging**، التجوال - **roaming**).
    *   **نشطة (Active):** (مكالمة مستمرة - **Ongoing call**، التسليم - **Handover**، مراقبة قوة وجودة محطتها القاعدية - **BTS**، مراقبة قوة محطات **BTS** المجاورة).
*   **غير مرتبطة (Detached):** وتشمل الفصل الضمني (**Implicit de.**) أو فصل **IMSI** (**IMSI de.**) [4].

#### ب. النظام الفرعي للمحطة القاعدية (Base Station Subsystem - BSS)
يتكون النظام الفرعي للمحطة القاعدية (**BSS**) من جزأين يتواصلان عبر واجهة موحدة [7]:

1.  **محطة الإرسال والاستقبال القاعدية (Base Transceiver Station - BTS):**
    *   يضم أجهزة الإرسال والاستقبال الراديوية التي تحدد الخلية (Cell) [8].
    *   يتعامل مع بروتوكولات الوصلة الراديوية مع محطة الهاتف المتنقل (**MS**) [8].
    *   يقوم بتسجيل عمليات نقل الكلام والبيانات من الـ **MS** [8].
    *   يؤدي مهام ترميز/فك ترميز القناة والتشفير/فك التشفير (**channel coding/decoding and encryption/decryption**) [8].
    *   متطلباته تشمل المتانة، والموثوقية، والحد الأدنى من التكاليف [8].
    *   يشمل هوائيات وأجهزة إرسال واستقبال راديوية والواجهة إلى مرفق **PCM** (الوصلة الخلفية - **backhaul**) للصوت والتحكم إلى الـ **BSC** [9]. يتكون الموقع (Site) من المأوى (**The Shelter**) والبرج (**The Tower**) [9].

2.  **وحدة التحكم في المحطة القاعدية (Base Station Controller - BSC):**
    *   يدير الموارد للـ **BTS** [9].
    *   يتعامل مع إعداد المكالمة (**call set up**) وتحديث الموقع (**Location update**) والتسليم (**Handover**) لكل **MS** [9].
    *   تتصل محطات **BTS** بـ **BSC**، والذي يدير الموارد الراديوية [9].
    *   يُجري صيانة المكالمات باستخدام قوة الإشارة المستقبلة المرسلة بواسطة محطات الهاتف المتنقل عادةً كل 480 مللي ثانية [9].
    *   يبدأ عمليات التسليم (**handovers**) إلى الخلايا الأخرى، ويغير طاقة إرسال الـ **BTS** [10].

#### ج. النظام الفرعي للشبكة والتبديل (Network Subsystem - NSS)
يحتوي النظام الفرعي للشبكة والتبديل (**NSS**) على العناصر الرئيسية التالية [2]:

1.  **مركز تبديل الهواتف المتنقلة (Mobile Switching Center - MSC):**
    *   يُعد قلب الشبكة (**Heart of the network**) [10].
    *   هو عبارة عن مقسم إلكتروني محوسب يوفر الواجهة بين الـ **MS** والشبكة الثابتة [11].
    *   يقوم بتبديل اتصالات الكلام والبيانات بين [10]: وحدات التحكم في المحطة القاعدية (**BSC**s)، ومراكز تبديل الهواتف المتنقلة الأخرى (**MSC**s)، وشبكات GSM، والشبكات الخارجية الأخرى [10].
    *   لا يحتوي الـ **MSC** على أي معلمات للمشتركين [11].
    *   وظائفه الرئيسية الثلاث هي: ربط المكالمات من المرسل إلى المستقبل، وجمع تفاصيل المكالمات الصادرة والواردة، والإشراف على تشغيل باقي مكونات الشبكة [10].
    *   يرتبط الـ **MSC** بـ: **HLR, VLR, AUC, EIR** [11].

2.  **مسجل الموقع الأصلي (Home Location Register - HLR):**
    *   قاعدة البيانات المركزية التي تخزن وتدير جميع معلمات اشتراك الهاتف المتنقل [12].
    *   يحتوي على: أرقام تعريف المشترك (**IMSI, MSISDN**)، معلومات الموقع الحالي للمشترك (**MSC/VLR**)، معلومات مصادقة المشترك، معلومات الفوترة (**Charging**)، وطريقة إصدار الفواتير (**Billing method**) [12].

3.  **مسجل موقع الزوار (Visitor Location Register - VLR):**
    *   موقع تخزين مؤقت لمعلومات الاشتراك الخاصة بمحطات الهاتف المتنقل التي تقع ضمن منطقة خدمة مركز الـ **MSC** [12].
    *   يحتوي على: حالة الهاتف المتنقل (متاح، مشغول، إلخ)، هوية الـ **MS** المؤقتة (**TMSI** - Temporary MS identity)، رقم التجوال المؤقت للـ **MS** (**MSRN** - Temporary MS roaming number)، ومناطق الموقع (**Location areas**)، ومعلومات الخدمة التكميلية [13].

4.  **مركز المصادقة (Authentication Center - AUC):**
    *   أحد المكونات المتصلة بالـ **MSC** [11].

5.  **سجل هوية المعدات (Equipment Identity Register - EIR):**
    *   قاعدة بيانات مركزية للتحقق من صحة هوية المعدات المتنقلة الدولية (**IMEI**) [13].
    *   يستخدم عملية مصادقة منفصلة لمعدات **MS** لأن المشترك والمعدات منفصلان في GSM [13].
    *   يحتوي الـ **EIR** على 3 قوائم [13, 14]:
        *   **القائمة البيضاء (White list):** لمعدات **MS** الصالحة [13].
        *   **القائمة السوداء (Black list):** لأجهزة **MS** المسروقة أو المرفوضة الخدمة [14].
        *   **القائمة الرمادية (Gray list):** لأجهزة **MS** ذات الأداء الضعيف (مثل البرامج المعيبة) [14].
    *   يتم التحقق من **IMEI** عندما ترسل الـ **MS** طلب **IMEI** إلى الـ **BSS**، الذي يمرره إلى الـ **MSC/VLR**، الذي يطلب التحقق من الـ **EIR** [14].

6.  **مركز التشغيل والصيانة (Operation and Maintenance Center - OMC):**
    *   يدير الكتل الوظيفية لشبكة GSM: **MSC**، **BSC** (وبشكل غير مباشر **BTS**s) [14].
    *   مهمته هي الحفاظ على التشغيل المُرضي لشبكة GSM [14].
    *   يعتمد على مراقبة حمل النظام (**system load**)، ومعدلات الحظر (**blocking rates**)، والتسليم (**handovers**)، إلخ [14].
    *   تشمل أنشطته: نظام إدارة الشبكة (**NMS** - Network Management System) لتعديل تكوين الشبكة، وصيانة المعدات بهدف اكتشاف وتحديد موقع وتصحيح الأعطال [15].

### 3. ميزات نظام GSM (GSM Features)
يوفر نظام GSM ميزات أساسية ومتقدمة [15, 16]:

**الميزات الأساسية (Basic Features)** [15]:
*   **انتظار المكالمات (Call Waiting):** إشعار بالمكالمات الواردة أثناء التحدث [15].
*   **تعليق المكالمة (Call Hold):** وضع المتصل في وضع الانتظار لتلقي مكالمة أخرى [15].
*   **حظر المكالمات (Call Barring):** حظر جميع المكالمات الصادرة أو الواردة [15].
*   **تحويل المكالمات (Call Forwarding):** يمكن إرسال المكالمات إلى أرقام مختلفة يحددها المستخدم [15].
*   **مؤتمرات مكالمات متعددة الأطراف (Multi Party Call Conferencing):** ربط عدة مكالمات معًا [15].

**الميزات المتقدمة (Advanced Features)** [16]:
*   **هوية خط الاتصال (Calling Line ID):** عرض رقم الهاتف الوارد [16].
*   **خدمة الخط البديل (Alternate Line Service):** خط للمكالمات الشخصية وآخر لمكالمات العمل [16].
*   **مجموعة المستخدمين المغلقة (Closed User Group):** الاتصال عن طريق قائمة طلب الأرقام [16].
*   **إشعار الرسوم (Advice of Charge):** حصر التكاليف الفعلية للمكالمات الهاتفية [16].
*   **الفاكس والبيانات (Fax & Data)** [16].
*   **التجوال (Roaming):** يمكن للخدمات والميزات أن تتبع العميل من سوق إلى سوق [16].

### 4. الطبقة الفيزيائية وواجهة الهواء (GSM Physical Layer and Air Interface)

#### أ. معالجة الكلام (Speech Processing)
*   يتم تشفير الكلام رقميًا في GSM بمعدل 13 كيلوبت في الثانية (**13 kbps**) [7, 17].
*   **سلسلة الإرسال (Transmission Chain):** تبدأ الإشارة الصوتية (**Acoustic signal**) بالتحويل إلى إشارة كهربائية تماثلية (**Analog electrical speech signal**) عبر الميكروفون، ثم يتم تشفير الكلام (**Speech encoder**) بمعدل 13 كيلوبت في الثانية، ثم يتم ترميز القناة (**Channel encoder**) بمعدل 22.8 كيلوبت في الثانية، ثم تشذير البيانات (**Interleaver**)، ثم التشفير (**Ciphering**)، ثم تجميع وتعدد إرسال الدفعات (**Burst assembling and multiplexing**) بمعدل 33.85 كيلوبت في الثانية، وأخيراً التعديل (**Modulator**) [17].
*   **سلسلة الاستقبال (Reception Chain):** هي العملية العكسية وتبدأ بفك التشكيل (**Demodulator**) بمعدل 33.85 كيلوبت في الثانية، مروراً بفك تجميع الدفعات، وفك التشفير، وإلغاء التشذير (**De-Interleaver**)، وفك ترميز القناة، وتنتهي بفك تشفير الكلام بمعدل 13 كيلوبت في الثانية، وصولاً إلى الكلام المسترجع [18].

#### ب. التعديل (Modulation)
*   مخطط التعديل المستخدم في نظام GSM هو **GMSK** [18].
*   يجب أن يلبي التعديل متطلبات كفاءة عالية لعرض النطاق الترددي، واستهلاك منخفض للطاقة، وأداء جيد لمعدل الخطأ البتات (**BER** - Bit Error Rate)، وتكلفة تنفيذ منخفضة [18].
*   معدل بيانات التشكيل (**Modulation Data Rate**) هو 270.833333 كيلوبت في الثانية [19].

#### ج. موارد الترددات (Frequency Resource)
*   **GSM900:** ترددات الوصلة الصاعدة (**uplink**) من 890 إلى 915 ميجاهرتز، وترددات الوصلة الهابطة (**downlink**) من 935 إلى 960 ميجاهرتز. فاصل ازدواج التردد (**duplex interval**) هو 45 ميجاهرتز، وعرض النطاق الترددي (**bandwidth**) هو 25 ميجاهرتز [20].
*   **GSM1800:** فاصل ازدواج التردد 95 ميجاهرتز، وعرض النطاق الترددي 75 ميجاهرتز [20].
*   تبلغ المسافة الزمنية بين تردد الإرسال والاستقبال (**Tx/Rx Frequency Spacing**) 45 ميجاهرتز [19].
*   تبلغ المسافة بين قنوات **ARFCN** مسافة 200 كيلوهرتز [19].

#### د. واجهة الهواء وتقنية TDMA
*   للتغلب على التضاؤل متعدد المسارات (**multipath fading**) تستخدم تقنيات مثل التنوع المجهري وتقنيات الدمج (**Microscopic diversity and combining techniques**)، والقفز الترددي (**Frequency hopping**)، وتصحيح الأخطاء مع تقنية التشذير (**Interleaving technique**)، والتحكم التكيفي في الطاقة (**adaptive power control**) [20].
*   يستغرق إطار النفاذ المتعدد بتقسيم الزمن (**TDMA frame**) الواحد 4.615 مللي ثانية، ويشمل 8 مستخدمين في الإطار الكامل (**Full Rate**) [19, 21].
*   يتكون كل قناة راديوية من 8 شقوق زمنية (**time slots**) [21].
*   يبلغ زمن الشق الزمني (**Time slot Period**) حوالي 576.9 ميكروثانية [19].

**هيكل الشق الزمني (One time slot structure)** [22]:
يتكون الشق الزمني من [22]:
1.  **بتات الذيل (Tale bits):** موجودة في بداية ونهاية كل شق لتمييزه وتحديد بداية ونهاية الدفقة (**burst**) [22].
2.  **البيانات المرمزة (Coded data):** هي المعلومات الفعلية المراد إرسالها (114 بت من أصل 156.25 بت) [22].
3.  **علم السرقة (Stealing flag):** يساعد المحطة القاعدية في التمييز بين ما إذا كانت البيانات المرمزة هي بيانات تحكم أو معلومات فعلية [23].
4.  **النخاع الأوسط (Midamble):** يتكون من 26 بت متسلسلة للتدريب (**training sequence**). يساعد هذا التسلسل الموازن التكيفي (**adaptive equalizer**) في تحليل خصائص القناة الراديوية قبل الترميز [23].
5.  **فترة الحماية (Guard period):** فترة حماية 8.25 بت في نهاية كل شق زمني لمنع التداخل (**overlapping**) مع الشق الزمني التالي [24].

**الحاجة إلى إزاحة الشق الزمني (Timeslot Offset)**
*   يتم توفير إزاحة قدرها 3 شقوق زمنية (**3 timeslots offset**) بين الوصلة الهابطة (**downlink**) والوصلة الصاعدة (**uplink**) [24].
*   يتم ذلك للتغلب على مشكلة اضطرار محطة الهاتف المتنقل (**MS**) للإرسال والاستقبال في نفس الوقت إذا كانت الوصلتان محاذيتين تماماً، وهذا الترتيب يتيح تصميم **MS** باستخدام مُركِّب تردد واحد فقط (**one synthesizer**) [17, 24].

**مثال لتوضيح إزاحة الشق الزمني:**
تخيل أنك تتحدث إلى صديقك عبر جهاز اتصال لاسلكي (Walkie-Talkie). إذا لم يكن هناك إزاحة زمنية (Timeslot Offset) في شبكة GSM، فسيتعين على هاتفك أن يتحدث ويستمع في نفس اللحظة تمامًا، مما يجعل عملية التصنيع صعبة ومكلفة، كأنك تحاول التحدث وتلقي الرد في فمك وأذنك في آن واحد. بفضل الإزاحة الزمنية لـ 3 شقوق، يستطيع هاتفك (المصمم ببساطة أكبر) إنهاء إرساله قبل أن يبدأ في استقبال بيانات الوصلة الهابطة، ما يسمح له باستخدام مكون واحد (synthesizer) بدلاً من مكونين [17, 24].